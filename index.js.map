{"version":3,"file":"index.js","sources":["../src/js/unsplash-api.js","../src/js/refs.js","../src/js/create-markup.js","../src/js/loader.js","../src/js/loadmore-btn.js","../src/js/gallery.js"],"sourcesContent":["import axios from 'axios';\n\n/**\n *\n * @param {string} query\n * @returns images list\n */\nexport async function getPhotos(query, page = 1) {\n  const BASE_URL = 'https://api.unsplash.com';\n  const API_KEY = 'LxvKVGJqiSe6NcEVZOaLXC-f2JIIWZaq_o0WrF8mwJc';\n  const API_ENDPOINT = '/search/photos';\n\n  try {\n    const response = await axios.get(`${BASE_URL}${API_ENDPOINT}`, {\n      params: {\n        query,\n        per_page: 12,\n        page,\n        orientation: 'portrait',\n        client_id: API_KEY,\n      },\n    });\n    return response.data;\n  } catch (error) {\n    console.error(error);\n  }\n}\n","export const refs = {\n  form: document.querySelector('.js-search-form'),\n  galleryList: document.querySelector('.js-gallery'),\n  loader: document.querySelector('.loader'),\n  loadMoreBtn: document.querySelector('.js-btn-wrapper'),\n};\n","export function createMarkup(array) {\n  return array.map(item => `\n      <li class=\"gallery-item\">\n        <img src=\"${item.urls.small}\" alt=\"${item.description}\" />\n      </li>\n    `).join('')\n  \n\n  \n}","import { refs } from './refs';\nexport function showLoader() {\n  refs.loader.classList.remove('is-hidden');\n}\n\nexport function hideLoader() {\n  refs.loader.classList.add('is-hidden');\n}\n","import { refs } from './refs';\nexport function showBtn() {\n  refs.loadMoreBtn.classList.remove('is-hidden');\n}\n\nexport function hideBtn() {\n  refs.loadMoreBtn.classList.add('is-hidden');\n}\n","import { getPhotos } from './unsplash-api';\nimport { refs } from './refs';\nimport { createMarkup } from './create-markup';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { showLoader, hideLoader } from './loader';\nimport { showBtn, hideBtn } from './loadmore-btn';\nrefs.form.addEventListener('submit', onSubmit);\nrefs.loadMoreBtn.addEventListener('click', onClick);\nlet page = 1;\nlet query = null;\n\nasync function onSubmit(event) {\n  event.preventDefault();\n  showLoader();\n  hideBtn();\n  refs.galleryList.innerHTML = '';\n  query = event.currentTarget.elements.search.value.trim();\n\n  try {\n    const response = await getPhotos(query, page);\n    if (response.results.length === 0) {\n      return iziToast.error({\n        message: `По вашому заипту ${query}, нічого не знайдено`,\n        position: 'bottomRight',\n        backgroundColor: 'red',\n        theme: 'dark',\n      });\n    }\n\n    // console.log(response.total);\n\n    refs.galleryList.innerHTML = createMarkup(response.results);\n    if (response.total > 12) {\n      console.log('show more');\n\n      showBtn();\n    }\n  } catch (error) {\n    console.log(error);\n  } finally {\n    hideLoader();\n  }\n}\n\nasync function onClick(event) {\n  page++;\n  showLoader();\n  console.log('on click function');\n\n  try {\n    const response = await getPhotos(query, page);\n    const lastPage = Math.ceil(response.total / 12);\n\n    refs.galleryList.insertAdjacentHTML(\n      'beforeend',\n      createMarkup(response.results)\n    );\n\n    if (lastPage === page) {\n      hideBtn();\n      iziToast.info({\n        message: `Це остання сторінка`,\n        position: 'bottomRight',\n        backgroundColor: 'blue',\n        theme: 'dark',\n      });\n    }\n  } catch (error) {\n    console.log(error);\n  } finally {\n    hideLoader();\n  }\n}\n"],"names":["getPhotos","query","page","BASE_URL","API_KEY","API_ENDPOINT","axios","error","refs","createMarkup","array","item","showLoader","hideLoader","showBtn","hideBtn","onSubmit","onClick","event","response","iziToast","lastPage"],"mappings":"6vBAOO,eAAeA,EAAUC,EAAOC,EAAO,EAAG,CAC/C,MAAMC,EAAW,2BACXC,EAAU,8CACVC,EAAe,iBAErB,GAAI,CAUF,OATiB,MAAMC,EAAM,IAAI,GAAGH,CAAQ,GAAGE,CAAY,GAAI,CAC7D,OAAQ,CACN,MAAAJ,EACA,SAAU,GACV,KAAAC,EACA,YAAa,WACb,UAAWE,CACZ,CACP,CAAK,GACe,IACjB,OAAQG,EAAO,CACd,QAAQ,MAAMA,CAAK,CACpB,CACH,CC1BO,MAAMC,EAAO,CAClB,KAAM,SAAS,cAAc,iBAAiB,EAC9C,YAAa,SAAS,cAAc,aAAa,EACjD,OAAQ,SAAS,cAAc,SAAS,EACxC,YAAa,SAAS,cAAc,iBAAiB,CACvD,ECLO,SAASC,EAAaC,EAAO,CAClC,OAAOA,EAAM,IAAIC,GAAQ;AAAA;AAAA,oBAEPA,EAAK,KAAK,KAAK,UAAUA,EAAK,WAAW;AAAA;AAAA,KAExD,EAAE,KAAK,EAAE,CAId,CCRO,SAASC,GAAa,CAC3BJ,EAAK,OAAO,UAAU,OAAO,WAAW,CAC1C,CAEO,SAASK,GAAa,CAC3BL,EAAK,OAAO,UAAU,IAAI,WAAW,CACvC,CCNO,SAASM,GAAU,CACxBN,EAAK,YAAY,UAAU,OAAO,WAAW,CAC/C,CAEO,SAASO,GAAU,CACxBP,EAAK,YAAY,UAAU,IAAI,WAAW,CAC5C,CCAAA,EAAK,KAAK,iBAAiB,SAAUQ,CAAQ,EAC7CR,EAAK,YAAY,iBAAiB,QAASS,CAAO,EAClD,IAAIf,EAAO,EACPD,EAAQ,KAEZ,eAAee,EAASE,EAAO,CAC7BA,EAAM,eAAc,EACpBN,IACAG,IACAP,EAAK,YAAY,UAAY,GAC7BP,EAAQiB,EAAM,cAAc,SAAS,OAAO,MAAM,OAElD,GAAI,CACF,MAAMC,EAAW,MAAMnB,EAAUC,EAAOC,CAAI,EAC5C,GAAIiB,EAAS,QAAQ,SAAW,EAC9B,OAAOC,EAAS,MAAM,CACpB,QAAS,oBAAoBnB,CAAK,uBAClC,SAAU,cACV,gBAAiB,MACjB,MAAO,MACf,CAAO,EAKHO,EAAK,YAAY,UAAYC,EAAaU,EAAS,OAAO,EACtDA,EAAS,MAAQ,KACnB,QAAQ,IAAI,WAAW,EAEvBL,IAEH,OAAQP,EAAO,CACd,QAAQ,IAAIA,CAAK,CACrB,QAAY,CACRM,GACD,CACH,CAEA,eAAeI,EAAQC,EAAO,CAC5BhB,IACAU,IACA,QAAQ,IAAI,mBAAmB,EAE/B,GAAI,CACF,MAAMO,EAAW,MAAMnB,EAAUC,EAAOC,CAAI,EACtCmB,EAAW,KAAK,KAAKF,EAAS,MAAQ,EAAE,EAE9CX,EAAK,YAAY,mBACf,YACAC,EAAaU,EAAS,OAAO,CACnC,EAEQE,IAAanB,IACfa,IACAK,EAAS,KAAK,CACZ,QAAS,sBACT,SAAU,cACV,gBAAiB,OACjB,MAAO,MACf,CAAO,EAEJ,OAAQb,EAAO,CACd,QAAQ,IAAIA,CAAK,CACrB,QAAY,CACRM,GACD,CACH"}